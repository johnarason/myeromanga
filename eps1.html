<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no" />
  <title>ÂΩºÂ•≥„ÅÆÊÄßÊ¨≤„ÅåÂº∑„Åô„Åé„ÇãË©± - JOHN.ERO</title>

  <style>
    html, body {
      margin: 0;
      padding: 0;
      width: 100%;
      overflow-x: hidden;
    }

    body {
      background-color: #121212;
      color: #f1f1f1;
      font-family: 'Segoe UI', sans-serif;
      margin: 0;
      padding: 0;
      -webkit-text-size-adjust: 100%;
    }
    a {
      color: #fff;
      text-decoration: none;
    }
    a:hover {
      text-decoration: underline;
    }

    /* „Éò„ÉÉ„ÉÄ„Éº */
    header {
      background-color: #ff69b4;
      color: #fff;
      font-weight: bold;
      font-size: 24px;
      padding: 12px 20px;
      width: 100vw;
      position: sticky;
      top: 0;
      z-index: 100;
      box-shadow: 0 2px 5px rgba(0,0,0,0.3);
      display: flex;
      align-items: center;
      justify-content: space-between;
      position: relative;
      box-sizing: border-box;
    }
    #menuBtn {
      cursor: pointer;
      font-size: 26px;
      user-select: none;
      color: #fff;
      margin: 0;
    }
    .logo {
      user-select: none;
      font-size: 28px;
      position: absolute;
      left: 50%;
      transform: translateX(-50%);
    }
    #searchToggle {
      background: none;
      border: none;
      color: #fff;
      font-size: 22px;
      cursor: pointer;
    }
    #searchForm {
      position: absolute;
      top: 56px;
      right: 20px;
      background: #ff69b4;
      padding: 8px;
      border-radius: 6px;
      display: none;
      z-index: 101;
    }
    #searchInput {
      font-size: 16px;
      padding: 6px 10px;
      border-radius: 4px;
      border: none;
      outline: none;
      background-color: #000;
      color: #fff;
      width: 180px;
    }

    /* ‰ΩúÂìÅ‰∏ÄË¶ß„É°„Éã„É•„Éº */
    #menu {
      position: absolute;
      top: 56px;
      left: 10px;
      background: #121212;
      border: 1px solid #fff;
      border-radius: 8px;
      padding: 12px 18px;
      display: none;
      color: #fff;
      max-width: 260px;
      box-shadow: 0 0 15px rgba(255,105,180,0.7);
      z-index: 101;
      word-break: break-word;
    }
    #menu a {
      display: block;
      padding: 8px 0;
      border-bottom: 1px solid #444;
      word-break: break-word;
    }
    #menu a:last-child {
      border-bottom: none;
    }
    #menu a:hover {
      background-color: #ff69b4;
      color: #121212;
    }

    /* „Ç≥„É≥„ÉÜ„É≥„ÉÑ */
    .info {
      margin: 20px auto 40px;
      max-width: 700px;
      text-align: center;
      padding: 0 10px;
    }
    .info h1 {
      font-size: 28px;
      margin: 0 0 8px;
    }
    .info .author {
      font-size: 16px;
      color: #ccc;
    }
    #comic {
      max-width: 700px;
      margin: 0 auto 60px;
      padding: 0 10px;
      width: 100%;
    }
    .comic-img {
      max-width: 100%;
      width: 350px;
      height: auto;
      margin: 24px auto;
      padding-bottom: 12px;
      border-bottom: 1px solid rgba(255,255,255,0.05);
      box-shadow: 0 0 12px rgba(0, 0, 0, 0.6);
      border-radius: 4px;
      display: block;
    }
    @media (max-width: 600px) {
      .comic-img {
        width: 90%;
      }
    }

    /* „Ç≥„É°„É≥„ÉàÊ¨Ñ */
    #comment-section {
      max-width: 700px;
      margin: 40px auto 80px;
      padding: 20px;
      background-color: #2a2a2a;
      border-radius: 12px;
      color: #fff;
      box-shadow: 0 0 10px rgba(255,105,180,0.7);
    }
    #comment-section h2 {
      margin-bottom: 16px;
    }
    #nickname, #commentContent {
      width: 100%;
      background: #000;
      color: #fff;
      border: 1px solid #ccc;
      border-radius: 6px;
      padding: 8px;
      margin-bottom: 12px;
      font-size: 16px;
      resize: vertical;
    }
    #commentContent {
      min-height: 80px;
    }
    #submitCommentBtn {
      margin-top: 12px;
      padding: 10px 24px;
      border: none;
      border-radius: 6px;
      background-color: #ff69b4;
      color: white;
      cursor: pointer;
      font-size: 16px;
    }
    #submitCommentBtn:hover {
      background-color: #e053a1;
    }
    #comments {
      margin-top: 32px;
      text-align: left;
      max-height: 400px;
      overflow-y: auto;
    }
    .comment {
      background: #1e1e1e;
      border-radius: 8px;
      padding: 12px;
      margin-bottom: 12px;
      border: 1px solid #555;
      word-break: break-word;
    }
    .comment strong {
      display: block;
      margin-bottom: 4px;
    }
    .comment .timestamp {
      font-size: 12px;
      color: #ccc;
    }
    .deleteBtn {
      font-size: 16px;
      padding: 0;
      margin-left: 8px;
      background: none;
      border: none;
      color: #ff69b4;
      cursor: pointer;
      user-select: none;
    }
    .deleteBtn:hover {
      color: #e053a1;
    }

    /* üü• Âè≥‰∏ãÂ∫ÉÂëä */
    #adBanner {
      position: fixed;
      bottom: 0;
      right: 0;
      display: none;
      z-index: 9999;
      animation: slideInRight 1.5s ease forwards;
    }
    #adBanner img {
      width: 300px;
      height: auto;
      display: block;
      cursor: pointer;
    }
    #adBanner #closeAd {
      position: absolute;
      top: 4px;
      right: 4px;
      background-color: rgba(0,0,0,0.6);
      color: white;
      border: none;
      padding: 4px 8px;
      border-radius: 4px;
      font-size: 12px;
      cursor: pointer;
    }

    /* üü¶ ‰∏ã„Åã„Çâ„Çπ„É©„Ç§„Éâ„Ç§„É≥„Åô„Çã‰∏ãÈÉ®Â∫ÉÂëä */
    #adFullBanner {
      position: fixed;
      bottom: 0;
      left: 0;
      right: 0;
      width: 100%;
      display: none;
      z-index: 9998;
      animation: slideInDown 2.5s ease forwards;
      cursor: pointer;
    }
    #adFullBanner img {
      width: 100%;
      height: auto;
      display: block;
      object-fit: contain;
    }

    /* „Ç¢„Éã„É°„Éº„Ç∑„Éß„É≥ */
    @keyframes slideInRight {
      0% { opacity: 0; transform: translateX(100%); }
      100% { opacity: 1; transform: translateX(0); }
    }
    @keyframes slideInDown {
      from { transform: translateY(-100%); opacity: 0; }
      to { transform: translateY(0); opacity: 1; }
    }
  </style>
</head>
<body>

<header>
  <div id="menuBtn" title="‰ΩúÂìÅ‰∏ÄË¶ß">&#9776;</div>
  <a href="index.html" class="logo">JOHN.ERO</a>
  <div id="searchToggle" title="Ê§úÁ¥¢" style="cursor:pointer; width:24px; height:24px; display:flex; align-items:center; justify-content:center;">
    <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="3" stroke-linecap="round" stroke-linejoin="round">
      <circle cx="10" cy="10" r="7"></circle>
      <line x1="15" y1="15" x2="22" y2="22"></line>
    </svg>
  </div>
  <form id="searchForm" onsubmit="event.preventDefault(); searchComic();">
    <input type="text" id="searchInput" placeholder="‰ΩúÂìÅÊ§úÁ¥¢" autocomplete="off" />
  </form>
</header>

<!-- ‰ΩúÂìÅ‰∏ÄË¶ß„É°„Éã„É•„Éº -->
<div id="menu">
  <a href="index.html">ÂΩºÂ•≥„ÅÆÊÄßÊ¨≤„ÅåÂº∑„Åô„Åé„ÇãË©±.1</a>
  <a href="eps2.html">ÂΩºÂ•≥„ÅÆÊÄßÊ¨≤„ÅåÂº∑„Åô„Åé„ÇãË©±.2</a>
</div>

<div class="info">
  <h1>ÂΩºÂ•≥„ÅÆÊÄßÊ¨≤„ÅåÂº∑„Åô„Åé„ÇãË©±</h1>
  <div class="author">‰ΩúËÄÖ „Ç∏„Éß„É≥</div>
</div>

<div id="comic">
  <img class="comic-img" src="BC.png" alt="Page 0">
  <img class="comic-img" src="ÂÉï„ÅÆÂΩºÂ•≥„ÅÆÊÄßÊ¨≤„ÅåÂº∑„Åô„Åé„ÇãË©±_page-0001.jpg" alt="Page 1">
  <img class="comic-img" src="ÂÉï„ÅÆÂΩºÂ•≥„ÅÆÊÄßÊ¨≤„ÅåÂº∑„Åô„Åé„ÇãË©±_page-0002.jpg" alt="Page 2">
  <img class="comic-img" src="ÂÉï„ÅÆÂΩºÂ•≥„ÅÆÊÄßÊ¨≤„ÅåÂº∑„Åô„Åé„ÇãË©±_page-0003.jpg" alt="Page 3">
  <img class="comic-img" src="ÂÉï„ÅÆÂΩºÂ•≥„ÅÆÊÄßÊ¨≤„ÅåÂº∑„Åô„Åé„ÇãË©±_page-0004.jpg" alt="Page 4">
  <img class="comic-img" src="ÂÉï„ÅÆÂΩºÂ•≥„ÅÆÊÄßÊ¨≤„ÅåÂº∑„Åô„Åé„ÇãË©±_page-0005.jpg" alt="Page 5">
  <img class="comic-img" src="ÂÉï„ÅÆÂΩºÂ•≥„ÅÆÊÄßÊ¨≤„ÅåÂº∑„Åô„Åé„ÇãË©±_page-0006.jpg" alt="Page 6">
  <img class="comic-img" src="ÂÉï„ÅÆÂΩºÂ•≥„ÅÆÊÄßÊ¨≤„ÅåÂº∑„Åô„Åé„ÇãË©±_page-0007.jpg" alt="Page 7">
  <img class="comic-img" src="ÂÉï„ÅÆÂΩºÂ•≥„ÅÆÊÄßÊ¨≤„ÅåÂº∑„Åô„Åé„ÇãË©±_page-0008.jpg" alt="Page 8">
  <img class="comic-img" src="ÂÉï„ÅÆÂΩºÂ•≥„ÅÆÊÄßÊ¨≤„ÅåÂº∑„Åô„Åé„ÇãË©±_page-0009.jpg" alt="Page 9">
  <img class="comic-img" src="ÂÉï„ÅÆÂΩºÂ•≥„ÅÆÊÄßÊ¨≤„ÅåÂº∑„Åô„Åé„ÇãË©±_page-0010.jpg" alt="Page 10">
  <img class="comic-img" src="ÂÉï„ÅÆÂΩºÂ•≥„ÅÆÊÄßÊ¨≤„ÅåÂº∑„Åô„Åé„ÇãË©±_page-0011.jpg" alt="Page 11">
  <img class="comic-img" src="ÂÉï„ÅÆÂΩºÂ•≥„ÅÆÊÄßÊ¨≤„ÅåÂº∑„Åô„Åé„ÇãË©±_page-0012.jpg" alt="Page 12">
  <img class="comic-img" src="ÂÉï„ÅÆÂΩºÂ•≥„ÅÆÊÄßÊ¨≤„ÅåÂº∑„Åô„Åé„ÇãË©±_page-0013.jpg" alt="Page 13">
  <img class="comic-img" src="ÂÉï„ÅÆÂΩºÂ•≥„ÅÆÊÄßÊ¨≤„ÅåÂº∑„Åô„Åé„ÇãË©±_page-0014.jpg" alt="Page 14">
  <img class="comic-img" src="ÂÉï„ÅÆÂΩºÂ•≥„ÅÆÊÄßÊ¨≤„ÅåÂº∑„Åô„Åé„ÇãË©±_page-0015.jpg" alt="Page 15">
  <img class="comic-img" src="ÂÉï„ÅÆÂΩºÂ•≥„ÅÆÊÄßÊ¨≤„ÅåÂº∑„Åô„Åé„ÇãË©±_page-0016.jpg" alt="Page 16">
  <img class="comic-img" src="ÂÉï„ÅÆÂΩºÂ•≥„ÅÆÊÄßÊ¨≤„ÅåÂº∑„Åô„Åé„ÇãË©±_page-0017.jpg" alt="Page 17">
  <img class="comic-img" src="ÂÉï„ÅÆÂΩºÂ•≥„ÅÆÊÄßÊ¨≤„ÅåÂº∑„Åô„Åé„ÇãË©±_page-0018.jpg" alt="Page 18">
  <img class="comic-img" src="ÂÉï„ÅÆÂΩºÂ•≥„ÅÆÊÄßÊ¨≤„ÅåÂº∑„Åô„Åé„ÇãË©±_page-0019.jpg" alt="Page 19">
  <img class="comic-img" src="ÂÉï„ÅÆÂΩºÂ•≥„ÅÆÊÄßÊ¨≤„ÅåÂº∑„Åô„Åé„ÇãË©±_page-0020.jpg" alt="Page 20">
  <img class="comic-img" src="ÂÉï„ÅÆÂΩºÂ•≥„ÅÆÊÄßÊ¨≤„ÅåÂº∑„Åô„Åé„ÇãË©±_page-0021.jpg" alt="Page 21">
</div>

<div id="comment-section">
  <h2>„Ç≥„É°„É≥„Éà„ÇíÊäïÁ®ø„Åô„Çã</h2>
  <input id="nickname" type="text" placeholder="„Éã„ÉÉ„ÇØ„Éç„Éº„É†" maxlength="30" />
  <textarea id="commentContent" rows="4" placeholder="„Ç≥„É°„É≥„ÉàÂÜÖÂÆπ" maxlength="500"></textarea>
  <button id="submitCommentBtn" onclick="submitComment()">„Ç≥„É°„É≥„Éà„Åô„Çã</button>
  <div id="comments"></div>
</div>

<!-- üü• Âè≥‰∏ãÂ∫ÉÂëä -->
<div id="adBanner">
  <img src="AD.png" alt="Â∫ÉÂëä" onclick="location.href='buy.html'">
  <button id="closeAd" onclick="hideAd(); event.stopPropagation();">close ad √ó</button>
</div>

<!-- üü¶ ‰∏ãÈÉ®„Éê„Éä„ÉºÂ∫ÉÂëä -->
<div id="adFullBanner" onclick="location.href='buy.html'">
  <img id="adFullImage" src="AD2.png" alt="Â∫ÉÂëä„Éê„Éä„Éº" />
</div>

<!-- Firebase SDK -->
<script src="https://www.gstatic.com/firebasejs/11.10.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/11.10.0/firebase-database-compat.js"></script>

<script>
  if (!localStorage.getItem("userId")) {
    localStorage.setItem("userId", crypto.randomUUID());
  }
  const userId = localStorage.getItem("userId");

  const firebaseConfig = {
    apiKey: "AIzaSyBreOGYSXd2lI-HhWimPLjTtfdqttkIsV0",
    authDomain: "myeromanga.firebaseapp.com",
    databaseURL: "https://myeromanga-default-rtdb.asia-southeast1.firebasedatabase.app",
    projectId: "myeromanga",
    storageBucket: "myeromanga.firebasestorage.app",
    messagingSenderId: "756137144604",
    appId: "1:756137144604:web:e3e20dcbb58c6f1174cad9"
  };
  firebase.initializeApp(firebaseConfig);
  const db = firebase.database();
  const commentsRef = db.ref("comments");

  const menuBtn = document.getElementById("menuBtn");
  const menu = document.getElementById("menu");
  menuBtn.addEventListener("click", () => {
    menu.style.display = (menu.style.display === "block") ? "none" : "block";
  });

  document.getElementById("searchToggle").addEventListener("click", () => {
    const form = document.getElementById("searchForm");
    form.style.display = (form.style.display === "block") ? "none" : "block";
  });

  const works = [
    { name: "ÂÉï„ÅÆÂΩºÂ•≥„ÅÆÊÄßÊ¨≤„ÅåÂº∑„Åô„Åé„ÇãË©±", url: "index.html" },
    { name: "Âà•„ÅÆ‰ΩúÂìÅÂêç", url: "another.html" },
  ];

  function searchComic() {
    const keyword = document.getElementById("searchInput").value.trim().toLowerCase();
    if (!keyword) {
      alert("Ê§úÁ¥¢„Ç≠„Éº„ÉØ„Éº„Éâ„ÇíÂÖ•Âäõ„Åó„Å¶„Åè„Å†„Åï„ÅÑ");
      return;
    }
    const found = works.find(w => w.name.toLowerCase().includes(keyword));
    if (found) {
      window.location.href = found.url;
    } else {
      alert("Ë©≤ÂΩì„Åô„Çã‰ΩúÂìÅ„ÅåË¶ã„Å§„Åã„Çä„Åæ„Åõ„Çì");
    }
  }

  function submitComment() {
    const nicknameInput = document.getElementById("nickname");
    const contentInput = document.getElementById("commentContent");
    let nickname = nicknameInput.value.trim() || "ÂêçÁÑ°„Åó";
    let content = contentInput.value.trim();
    if (!content) {
      alert("„Ç≥„É°„É≥„ÉàÂÜÖÂÆπ„ÇíÂÖ•Âäõ„Åó„Å¶„Åè„Å†„Åï„ÅÑ");
      return;
    }

    const now = new Date();
    const timestamp = `${now.getFullYear()}/${String(now.getMonth()+1).padStart(2, "0")}/${String(now.getDate()).padStart(2, "0")} ${String(now.getHours()).padStart(2, "0")}:${String(now.getMinutes()).padStart(2, "0")}`;

    commentsRef.push({ nickname, content, timestamp })
      .then(() => console.log("„Ç≥„É°„É≥„ÉàÈÄÅ‰ø°ÊàêÂäü"))
      .catch((error) => console.error("„Ç≥„É°„É≥„ÉàÈÄÅ‰ø°„Ç®„É©„Éº:", error));

    nicknameInput.value = "";
    contentInput.value = "";
  }

  const commentsDiv = document.getElementById("comments");
  function refreshComments() {
    commentsDiv.innerHTML = "";
    let count = 1;
    commentsRef.once("value", (snapshot) => {
      snapshot.forEach((childSnapshot) => {
        const comment = childSnapshot.val();
        const div = document.createElement("div");
        div.className = "comment";
        div.innerHTML = `
          <strong>${count}. ${escapeHtml(comment.nickname)}</strong>
          <span class="timestamp">${escapeHtml(comment.timestamp)}</span>
          <button class="deleteBtn" data-key="${childSnapshot.key}" title="„Ç≥„É°„É≥„Éà„ÇíÂâäÈô§„Åô„Çã" style="float:right;">üóëÔ∏è</button>
          <br>${escapeHtml(comment.content).replace(/\n/g, "<br>")}
        `;
        commentsDiv.appendChild(div);
        count++;
      });
      commentsDiv.scrollTop = commentsDiv.scrollHeight;
      attachDeleteHandlers();
    });
  }

  function attachDeleteHandlers() {
    document.querySelectorAll(".deleteBtn").forEach(btn => {
      btn.onclick = () => {
        const key = btn.getAttribute("data-key");
        if (confirm("„Åì„ÅÆ„Ç≥„É°„É≥„Éà„ÇíÂâäÈô§„Åó„Åæ„Åô„ÅãÔºü")) {
          commentsRef.child(key).remove()
            .then(() => console.log("„Ç≥„É°„É≥„ÉàÂâäÈô§ÊàêÂäü"))
            .catch(err => console.error("„Ç≥„É°„É≥„ÉàÂâäÈô§„Ç®„É©„Éº:", err));
        }
      };
    });
  }

  commentsRef.on("value", refreshComments);

  function escapeHtml(text) {
    return text.replace(/[&<>"']/g, (m) => {
      return {
        "&": "&amp;",
        "<": "&lt;",
        ">": "&gt;",
        '"': "&quot;",
        "'": "&#39;"
      }[m] || m;
    });
  }

  // üü• Âè≥‰∏ãÂ∫ÉÂëä
  function showAd() {
    document.getElementById("adBanner").style.display = "block";
  }
  function hideAd() {
    document.getElementById("adBanner").style.display = "none";
    setTimeout(showAd, 10000);
  }
  setTimeout(showAd, 10000);

  // üü¶ ‰∏ãÈÉ®Â∫ÉÂëä
  function showFullAd() {
    const ad = document.getElementById("adFullBanner");
    const img = document.getElementById("adFullImage");
    const sequence = ["AD3.png", "AD2.png"];
    let step = 0;
    ad.style.display = "block";
    ad.style.animation = "slideInDown 1s ease forwards";
    img.src = sequence[step];
    const interval = setInterval(() => {
      step++;
      if (step < sequence.length) {
        img.src = sequence[step];
      } else {
        clearInterval(interval);
        ad.style.display = "none";
      }
    }, 1700);
  }
  setInterval(showFullAd, 10000);

</script>
</body>
</html>
